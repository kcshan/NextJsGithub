{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport React from \"react\";\n// import '../test.css'\nimport { useEffect } from 'react';\nimport axios from 'axios';\nimport Router from 'next/router';\nimport { connect } from 'react-redux';\nimport getConfig from 'next/config';\nimport { add } from '../store/store';\n\nvar _getConfig = getConfig(),\n    publicRuntimeConfig = _getConfig.publicRuntimeConfig;\n\nvar events = ['routeChangeStart', 'routeChangeComplete', 'routeChangeError', 'beforeHistoryChange', 'hashChangeStart', 'hashChangeComplete'];\n\nvar makeEvent = function makeEvent(type) {\n  return function () {// console.log(type, ...args)\n  };\n};\n\nevents.forEach(function (event) {\n  Router.events.on(event, makeEvent(event));\n});\n\nvar Index = function Index(_ref) {\n  var counter = _ref.counter,\n      username = _ref.username,\n      add = _ref.add,\n      rename = _ref.rename;\n\n  var gotoTestB = function gotoTestB() {\n    Router.push({\n      pathname: '/test/b',\n      query: {\n        id: 2\n      }\n    }, '/test/b/2');\n  };\n\n  useEffect(function () {\n    axios.get('/api/user/info').then(function (resp) {\n      console.log('index useEffect ', resp);\n    });\n  }, []);\n  return React.createElement(React.Fragment, null, React.createElement(\"span\", null, \"Count: \", counter), React.createElement(\"br\", null), React.createElement(\"span\", null, \"UserName: \", username), React.createElement(\"br\", null), React.createElement(\"input\", {\n    value: username,\n    onChange: function onChange(e) {\n      return rename(e.target.value);\n    }\n  }), React.createElement(\"button\", {\n    onClick: function onClick() {\n      return add(counter);\n    }\n  }, \"do add\"), React.createElement(\"a\", {\n    href: publicRuntimeConfig.OAUTH_URL\n  }, \"\\u53BB\\u767B\\u5F55\"));\n};\n\nIndex.getInitialProps =\n/*#__PURE__*/\nfunction () {\n  var _ref3 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee(_ref2) {\n    var reduxStore;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            reduxStore = _ref2.reduxStore;\n            reduxStore.dispatch(add(3));\n            return _context.abrupt(\"return\", {});\n\n          case 3:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function (_x) {\n    return _ref3.apply(this, arguments);\n  };\n}();\n\nexport default connect(function mapStateToProps(state) {\n  return {\n    counter: state.counter.count,\n    username: state.user.username\n  };\n}, function mapDispatchToProps(dispatch) {\n  return {\n    add: function add(num) {\n      return dispatch({\n        type: 'ADD',\n        num: num\n      });\n    },\n    rename: function rename(name) {\n      return dispatch({\n        type: 'UPDATE_USERNAME',\n        name: name\n      });\n    }\n  };\n})(Index);","map":{"version":3,"sources":["/Users/yangshasha/Downloads/workspace/coding/nodejs/NextJsGithub/nextjs-project/pages/index.js"],"names":["useEffect","axios","Router","connect","getConfig","add","publicRuntimeConfig","events","makeEvent","type","forEach","event","on","Index","counter","username","rename","gotoTestB","push","pathname","query","id","get","then","resp","console","log","e","target","value","OAUTH_URL","getInitialProps","reduxStore","dispatch","mapStateToProps","state","count","user","mapDispatchToProps","num","name"],"mappings":"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","sourcesContent":["// import '../test.css'\nimport { useEffect } from 'react'\nimport axios from 'axios'\nimport Router from 'next/router'\nimport { connect } from 'react-redux'\nimport getConfig from 'next/config'\n\nimport { add } from '../store/store'\n\nconst { publicRuntimeConfig } = getConfig()\n\nconst events = [\n  'routeChangeStart',\n  'routeChangeComplete',\n  'routeChangeError',\n  'beforeHistoryChange',\n  'hashChangeStart',\n  'hashChangeComplete'\n]\n\nconst makeEvent = (type) => {\n  return (...args) => {\n    // console.log(type, ...args)\n  }\n}\n\nevents.forEach(event => {\n  Router.events.on(event, makeEvent(event))\n})\n\n\nconst Index = ({ counter, username, add, rename }) => {\n  \n  const gotoTestB = () => {\n    Router.push(\n      {\n        pathname: '/test/b',\n        query: {\n          id: 2\n        },\n      },\n      '/test/b/2'\n    )\n  }\n\n  useEffect(() => {\n    axios.get('/api/user/info').then(resp => {\n      console.log('index useEffect ', resp)\n    })\n  }, [])\n\n  return (\n    <>\n      <span>Count: {counter}</span>\n      <br/>\n      <span>UserName: {username}</span>\n      <br/>\n      <input value={username} onChange={e => rename(e.target.value)}/>\n      <button onClick={() => add(counter)}>do add</button>\n      <a href={publicRuntimeConfig.OAUTH_URL}>去登录</a>\n    </>\n  )\n  \n}\n\nIndex.getInitialProps = async ({ reduxStore }) => {\n  reduxStore.dispatch(add(3))\n  return {}\n}\n\nexport default connect(\n  function mapStateToProps(state) {\n    return {\n      counter: state.counter.count,\n      username: state.user.username\n    }\n  },\n  function mapDispatchToProps(dispatch) {\n    return {\n      add: (num) => dispatch({ type: 'ADD', num }),\n      rename: (name) => dispatch({ type: 'UPDATE_USERNAME', name })\n    }\n  }\n)(Index)"]},"metadata":{},"sourceType":"module"}