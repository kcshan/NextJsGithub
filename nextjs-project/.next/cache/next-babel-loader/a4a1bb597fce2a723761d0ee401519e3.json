{"ast":null,"code":"import _Object$assign from \"@babel/runtime-corejs2/core-js/object/assign\";\nimport _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport { createStore, combineReducers, applyMiddleware } from 'redux';\nimport ReduxThunk from 'redux-thunk';\nimport { composeWithDevTools } from 'redux-devtools-extension';\nconst initialState = {\n  count: 0\n};\nconst userInitialState = {\n  username: 'thomas'\n};\nconst ADD = 'ADD';\n\nconst counterReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case ADD:\n      return {\n        count: state.count + (action.num || 1)\n      };\n\n    default:\n      return state;\n  }\n};\n\nconst UPDATE_USERNAME = 'UPDATE_USERNAME';\n\nconst userReducer = (state = userInitialState, action) => {\n  switch (action.type) {\n    case UPDATE_USERNAME:\n      return _objectSpread({}, state, {\n        username: action.name\n      });\n\n    default:\n      return state;\n  }\n};\n\nconst allReducers = combineReducers({\n  counter: counterReducer,\n  user: userReducer\n});\nconst store = createStore(allReducers, {\n  counter: initialState,\n  user: userInitialState\n}, composeWithDevTools(applyMiddleware(ReduxThunk))); // action creator\n\nexport const add = num => {\n  return {\n    type: ADD,\n    num\n  };\n};\n\nconst addAsync = num => {\n  return dispatch => {\n    setTimeout(() => {\n      store.dispatch(add(num));\n    }, 1000);\n  };\n};\n\nstore.dispatch(add(3)); // console.log(store.getState())\n\nstore.subscribe(() => {// console.log('changed', store.getState())\n}); // store.dispatch({ type: ADD })\n\nstore.dispatch(addAsync(5));\nstore.dispatch({\n  type: UPDATE_USERNAME,\n  name: 'thomas'\n});\nexport default function initiallizeStore(state) {\n  const store = createStore(allReducers, _Object$assign({\n    counter: initialState,\n    user: userInitialState\n  }, state), composeWithDevTools(applyMiddleware(ReduxThunk)));\n  return store;\n}","map":{"version":3,"sources":["/Users/yangshasha/Downloads/workspace/coding/nodejs/NextJsGithub/nextjs-project/store/store.js"],"names":["createStore","combineReducers","applyMiddleware","ReduxThunk","composeWithDevTools","initialState","count","userInitialState","username","ADD","counterReducer","state","action","type","num","UPDATE_USERNAME","userReducer","name","allReducers","counter","user","store","add","addAsync","dispatch","setTimeout","subscribe","initiallizeStore"],"mappings":";;AAAA,SAASA,WAAT,EAAsBC,eAAtB,EAAuCC,eAAvC,QAA8D,OAA9D;AACA,OAAOC,UAAP,MAAuB,aAAvB;AACA,SAASC,mBAAT,QAAoC,0BAApC;AAEA,MAAMC,YAAY,GAAG;AACnBC,EAAAA,KAAK,EAAE;AADY,CAArB;AAIA,MAAMC,gBAAgB,GAAG;AACvBC,EAAAA,QAAQ,EAAE;AADa,CAAzB;AAIA,MAAMC,GAAG,GAAG,KAAZ;;AACA,MAAMC,cAAc,GAAG,CAACC,KAAK,GAAGN,YAAT,EAAuBO,MAAvB,KAAkC;AACvD,UAAOA,MAAM,CAACC,IAAd;AACE,SAAKJ,GAAL;AACE,aAAO;AAAEH,QAAAA,KAAK,EAAEK,KAAK,CAACL,KAAN,IAAeM,MAAM,CAACE,GAAP,IAAc,CAA7B;AAAT,OAAP;;AACF;AACE,aAAOH,KAAP;AAJJ;AAMD,CAPD;;AASA,MAAMI,eAAe,GAAG,iBAAxB;;AACA,MAAMC,WAAW,GAAG,CAACL,KAAK,GAAGJ,gBAAT,EAA2BK,MAA3B,KAAsC;AACxD,UAAOA,MAAM,CAACC,IAAd;AACE,SAAKE,eAAL;AACE,+BACKJ,KADL;AAEEH,QAAAA,QAAQ,EAAEI,MAAM,CAACK;AAFnB;;AAIF;AACE,aAAON,KAAP;AAPJ;AASD,CAVD;;AAYA,MAAMO,WAAW,GAAGjB,eAAe,CAAC;AAClCkB,EAAAA,OAAO,EAAET,cADyB;AAElCU,EAAAA,IAAI,EAAEJ;AAF4B,CAAD,CAAnC;AAKA,MAAMK,KAAK,GAAGrB,WAAW,CAACkB,WAAD,EACvB;AACEC,EAAAA,OAAO,EAAEd,YADX;AAEEe,EAAAA,IAAI,EAAEb;AAFR,CADuB,EAKvBH,mBAAmB,CAACF,eAAe,CAACC,UAAD,CAAhB,CALI,CAAzB,C,CAQA;;AACA,OAAO,MAAMmB,GAAG,GAAIR,GAAD,IAAS;AAC1B,SAAO;AACLD,IAAAA,IAAI,EAAEJ,GADD;AAELK,IAAAA;AAFK,GAAP;AAID,CALM;;AAOP,MAAMS,QAAQ,GAAIT,GAAD,IAAS;AACxB,SAAQU,QAAD,IAAc;AACnBC,IAAAA,UAAU,CAAC,MAAM;AACfJ,MAAAA,KAAK,CAACG,QAAN,CAAeF,GAAG,CAACR,GAAD,CAAlB;AACD,KAFS,EAEP,IAFO,CAAV;AAGD,GAJD;AAKD,CAND;;AAQAO,KAAK,CAACG,QAAN,CAAeF,GAAG,CAAC,CAAD,CAAlB,E,CACA;;AAEAD,KAAK,CAACK,SAAN,CAAgB,MAAM,CACpB;AACD,CAFD,E,CAIA;;AACAL,KAAK,CAACG,QAAN,CAAeD,QAAQ,CAAC,CAAD,CAAvB;AACAF,KAAK,CAACG,QAAN,CAAe;AAAEX,EAAAA,IAAI,EAAEE,eAAR;AAAyBE,EAAAA,IAAI,EAAE;AAA/B,CAAf;AAEA,eAAe,SAASU,gBAAT,CAA0BhB,KAA1B,EAAiC;AAC9C,QAAMU,KAAK,GAAGrB,WAAW,CACvBkB,WADuB,EAEvB,eAAc;AACZC,IAAAA,OAAO,EAAEd,YADG;AAEZe,IAAAA,IAAI,EAAEb;AAFM,GAAd,EAGGI,KAHH,CAFuB,EAMvBP,mBAAmB,CAACF,eAAe,CAACC,UAAD,CAAhB,CANI,CAAzB;AAQA,SAAOkB,KAAP;AACD","sourcesContent":["import { createStore, combineReducers, applyMiddleware } from 'redux'\nimport ReduxThunk from 'redux-thunk'\nimport { composeWithDevTools } from 'redux-devtools-extension'\n\nconst initialState = {\n  count: 0\n}\n\nconst userInitialState = {\n  username: 'thomas'\n}\n\nconst ADD = 'ADD'\nconst counterReducer = (state = initialState, action) => {\n  switch(action.type) {\n    case ADD:\n      return { count: state.count + (action.num || 1) }\n    default:\n      return state\n  }\n}\n\nconst UPDATE_USERNAME = 'UPDATE_USERNAME'\nconst userReducer = (state = userInitialState, action) => {\n  switch(action.type) {\n    case UPDATE_USERNAME:\n      return {\n        ...state,\n        username: action.name\n      }\n    default:\n      return state\n  }\n}\n\nconst allReducers = combineReducers({\n  counter: counterReducer,\n  user: userReducer\n})\n\nconst store = createStore(allReducers, \n  {\n    counter: initialState,\n    user: userInitialState\n  },\n  composeWithDevTools(applyMiddleware(ReduxThunk))\n)\n\n// action creator\nexport const add = (num) => {\n  return {\n    type: ADD,\n    num\n  }\n}\n\nconst addAsync = (num) => {\n  return (dispatch) => {\n    setTimeout(() => {\n      store.dispatch(add(num))\n    }, 1000);\n  }\n}\n\nstore.dispatch(add(3))\n// console.log(store.getState())\n\nstore.subscribe(() => {\n  // console.log('changed', store.getState())\n})\n\n// store.dispatch({ type: ADD })\nstore.dispatch(addAsync(5))\nstore.dispatch({ type: UPDATE_USERNAME, name: 'thomas' })\n\nexport default function initiallizeStore(state) {\n  const store = createStore( \n    allReducers,\n    Object.assign({\n      counter: initialState,\n      user: userInitialState\n    }, state),\n    composeWithDevTools(applyMiddleware(ReduxThunk))\n  )\n  return store\n}"]},"metadata":{},"sourceType":"module"}