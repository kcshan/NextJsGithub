{"ast":null,"code":"import _Tooltip from \"antd/lib/tooltip\";\nimport _Dropdown from \"antd/lib/dropdown\";\nimport _Avatar from \"antd/lib/avatar\";\nimport _Input from \"antd/lib/input\";\nimport _Icon from \"antd/lib/icon\";\nimport _Menu from \"antd/lib/menu\";\nimport _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport _Layout from \"antd/lib/layout\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nimport { useState, useCallback } from 'react';\nimport Link from 'next/link';\nimport getConfig from 'next/config';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'next/router';\nimport axios from 'axios';\nimport Container from './Container';\nimport { logout } from '../store/store';\nconst {\n  Header,\n  Content,\n  Footer\n} = _Layout;\nconst {\n  publicRuntimeConfig\n} = getConfig();\nconst githubIconStyle = {\n  color: 'white',\n  fontSize: 40,\n  display: 'block',\n  paddingTop: 10,\n  marginRight: 20\n};\nconst footerStyle = {\n  textAlign: 'center'\n};\n\nconst Comp = ({\n  color,\n  children,\n  style\n}) => React.createElement(\"div\", {\n  style: _objectSpread({\n    color\n  }, style)\n}, children);\n\nconst MyLayout = ({\n  children,\n  user,\n  logout,\n  router\n}) => {\n  const urlQuery = router.query && router.query.query;\n  const [search, setSearch] = useState(urlQuery || '');\n  const handleSearchChange = useCallback(event => {\n    setSearch(event.target.value);\n  }, [setSearch]);\n  const handleOnSearch = useCallback(() => {\n    router.push(`/search?query=${search}`);\n  }, [search]);\n  const handleLogout = useCallback(() => {\n    logout();\n  }, [logout]);\n  const handleGotoOAuth = useCallback(e => {\n    e.preventDefault();\n    axios.get(`/prepare-auth?url=${router.asPath}`).then(resp => {\n      if (resp.status === 200) {\n        location.href = publicRuntimeConfig.OAUTH_URL;\n      } else {\n        console.log('prepare auth failed', resp);\n      }\n    }).catch(err => {\n      console.log('prepare auth failed', err);\n    });\n  }, []);\n  const userDropDown = React.createElement(_Menu, null, React.createElement(_Menu.Item, null, React.createElement(\"a\", {\n    href: \"javascript:void(0)\",\n    onClick: handleLogout\n  }, \"\\u767B\\u51FA\")));\n  return React.createElement(_Layout, null, React.createElement(Header, null, React.createElement(Container, {\n    renderer: React.createElement(\"div\", {\n      className: \"jsx-249156405\" + \" \" + \"header-inner\"\n    })\n  }, React.createElement(\"div\", {\n    className: \"jsx-249156405\" + \" \" + \"header-left\"\n  }, React.createElement(\"div\", {\n    className: \"jsx-249156405\" + \" \" + \"logo\"\n  }, React.createElement(\"a\", {\n    href: \"/\",\n    className: \"jsx-249156405\"\n  }, React.createElement(_Icon, {\n    type: \"github\",\n    style: githubIconStyle\n  }))), React.createElement(\"div\", {\n    className: \"jsx-249156405\"\n  }, React.createElement(_Input.Search, {\n    placeholder: \"\\u641C\\u7D22\\u4ED3\\u5E93\",\n    value: search,\n    onChange: handleSearchChange,\n    onSearch: handleOnSearch\n  }))), React.createElement(\"div\", {\n    className: \"jsx-249156405\" + \" \" + \"header-right\"\n  }, React.createElement(\"div\", {\n    className: \"jsx-249156405\" + \" \" + \"user\"\n  }, user && user.id ? React.createElement(_Dropdown, {\n    overlay: userDropDown\n  }, React.createElement(\"a\", {\n    href: \"/\",\n    className: \"jsx-249156405\"\n  }, React.createElement(_Avatar, {\n    size: 40,\n    src: user.avatar_url\n  }))) : React.createElement(_Tooltip, {\n    title: \"\\u70B9\\u51FB\\u8FDB\\u884C\\u767B\\u5F55\"\n  }, React.createElement(\"a\", {\n    // href={publicRuntimeConfig.OAUTH_URL} \n    // onClick={handleGotoOAuth}\n    href: `/prepare-auth?url=${router.asPath}`,\n    className: \"jsx-249156405\"\n  }, React.createElement(_Avatar, {\n    size: 40,\n    icon: \"user\"\n  }))))))), React.createElement(Content, null, React.createElement(Container, null, children)), React.createElement(Footer, {\n    style: footerStyle\n  }, \"Develop by Thomas @\", React.createElement(\"a\", {\n    href: \"mailto:cshan.kong@gmail.com\",\n    className: \"jsx-249156405\"\n  }, \"cshan.kong@gmail.com\")), React.createElement(_JSXStyle, {\n    id: \"3582700366\"\n  }, \".header-inner.jsx-249156405{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}.header-left.jsx-249156405{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;}.content.jsx-249156405{color:red;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy95YW5nc2hhc2hhL0Rvd25sb2Fkcy93b3Jrc3BhY2UvY29kaW5nL25vZGVqcy9OZXh0SnNHaXRodWIvbmV4dGpzLXByb2plY3QvY29tcG9uZW50cy9MYXlvdXQuanN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQTBIa0IsQUFHd0IsQUFJQSxBQUlILFVBQ1osZ0VBUmdDLEFBSUgseUdBQzdCLFVBSkEiLCJmaWxlIjoiL1VzZXJzL3lhbmdzaGFzaGEvRG93bmxvYWRzL3dvcmtzcGFjZS9jb2Rpbmcvbm9kZWpzL05leHRKc0dpdGh1Yi9uZXh0anMtcHJvamVjdC9jb21wb25lbnRzL0xheW91dC5qc3giLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VTdGF0ZSwgdXNlQ2FsbGJhY2sgfSBmcm9tICdyZWFjdCdcbmltcG9ydCBMaW5rIGZyb20gJ25leHQvbGluaydcbmltcG9ydCBnZXRDb25maWcgZnJvbSAnbmV4dC9jb25maWcnXG5pbXBvcnQgeyBjb25uZWN0IH0gZnJvbSAncmVhY3QtcmVkdXgnXG5pbXBvcnQgeyB3aXRoUm91dGVyIH0gZnJvbSAnbmV4dC9yb3V0ZXInXG5pbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnXG5pbXBvcnQgQ29udGFpbmVyIGZyb20gJy4vQ29udGFpbmVyJ1xuaW1wb3J0IHsgbG9nb3V0IH0gZnJvbSAnLi4vc3RvcmUvc3RvcmUnXG5pbXBvcnQgeyBCdXR0b24sIExheW91dCwgSWNvbiwgSW5wdXQsIEF2YXRhciwgVG9vbHRpcCwgRHJvcGRvd24sIE1lbnUgfSBmcm9tICdhbnRkJ1xuXG5jb25zdCB7IEhlYWRlciwgQ29udGVudCwgRm9vdGVyIH0gPSBMYXlvdXRcblxuY29uc3QgeyBwdWJsaWNSdW50aW1lQ29uZmlnIH0gPSBnZXRDb25maWcoKVxuXG5jb25zdCBnaXRodWJJY29uU3R5bGUgPSB7XG4gIGNvbG9yOiAnd2hpdGUnLFxuICBmb250U2l6ZTogNDAsXG4gIGRpc3BsYXk6ICdibG9jaycsXG4gIHBhZGRpbmdUb3A6IDEwLFxuICBtYXJnaW5SaWdodDogMjBcbn1cblxuY29uc3QgZm9vdGVyU3R5bGUgPSB7XG4gIHRleHRBbGlnbjogJ2NlbnRlcidcbn1cblxuY29uc3QgQ29tcCA9ICh7IGNvbG9yLCBjaGlsZHJlbiwgc3R5bGUgfSkgPT4gPGRpdiBzdHlsZT17eyBjb2xvciwgLi4uc3R5bGUgfX0+e2NoaWxkcmVufTwvZGl2PlxuXG5jb25zdCBNeUxheW91dCA9ICh7IGNoaWxkcmVuLCB1c2VyLCBsb2dvdXQsIHJvdXRlciB9KSA9PiB7XG5cbiAgY29uc3QgdXJsUXVlcnkgPSByb3V0ZXIucXVlcnkgJiYgcm91dGVyLnF1ZXJ5LnF1ZXJ5XG5cbiAgY29uc3QgW3NlYXJjaCwgc2V0U2VhcmNoXSA9IHVzZVN0YXRlKHVybFF1ZXJ5IHx8ICcnKVxuXG4gIGNvbnN0IGhhbmRsZVNlYXJjaENoYW5nZSA9IHVzZUNhbGxiYWNrKChldmVudCkgPT4ge1xuICAgIHNldFNlYXJjaChldmVudC50YXJnZXQudmFsdWUpXG4gIH0sIFtzZXRTZWFyY2hdKVxuXG4gIGNvbnN0IGhhbmRsZU9uU2VhcmNoID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHJvdXRlci5wdXNoKGAvc2VhcmNoP3F1ZXJ5PSR7c2VhcmNofWApXG4gIH0sIFtzZWFyY2hdKVxuXG4gIGNvbnN0IGhhbmRsZUxvZ291dCA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBsb2dvdXQoKVxuICB9LCBbbG9nb3V0XSlcblxuICBjb25zdCBoYW5kbGVHb3RvT0F1dGggPSB1c2VDYWxsYmFjaygoZSkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgIGF4aW9zLmdldChgL3ByZXBhcmUtYXV0aD91cmw9JHtyb3V0ZXIuYXNQYXRofWApXG4gICAgLnRoZW4ocmVzcCA9PiB7XG4gICAgICBpZiAocmVzcC5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICBsb2NhdGlvbi5ocmVmID0gcHVibGljUnVudGltZUNvbmZpZy5PQVVUSF9VUkxcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdwcmVwYXJlIGF1dGggZmFpbGVkJywgcmVzcClcbiAgICAgIH1cbiAgICB9KS5jYXRjaChlcnIgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ3ByZXBhcmUgYXV0aCBmYWlsZWQnLCBlcnIpXG4gICAgfSlcbiAgfSwgW10pXG5cbiAgY29uc3QgdXNlckRyb3BEb3duID0gKFxuICAgIDxNZW51PlxuICAgICAgPE1lbnUuSXRlbT5cbiAgICAgICAgPGEgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKVwiIG9uQ2xpY2s9e2hhbmRsZUxvZ291dH0+55m75Ye6PC9hPlxuICAgICAgPC9NZW51Lkl0ZW0+XG4gICAgPC9NZW51PlxuICApXG5cbiAgcmV0dXJuIChcbiAgICA8TGF5b3V0PlxuICAgICAgPEhlYWRlcj5cbiAgICAgIDxDb250YWluZXIgcmVuZGVyZXI9ezxkaXYgY2xhc3NOYW1lPVwiaGVhZGVyLWlubmVyXCIvPn0+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaGVhZGVyLWxlZnRcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImxvZ29cIj5cbiAgICAgICAgICAgIDxhIGhyZWY9XCIvXCI+XG4gICAgICAgICAgICAgIDxJY29uIHR5cGU9XCJnaXRodWJcIiBzdHlsZT17Z2l0aHViSWNvblN0eWxlfSAvPlxuICAgICAgICAgICAgPC9hPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICA8SW5wdXQuU2VhcmNoIFxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIuaQnOe0ouS7k+W6k1wiXG4gICAgICAgICAgICAgIHZhbHVlPXtzZWFyY2h9XG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVTZWFyY2hDaGFuZ2V9XG4gICAgICAgICAgICAgIG9uU2VhcmNoPXtoYW5kbGVPblNlYXJjaH1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhlYWRlci1yaWdodFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidXNlclwiPlxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHVzZXIgJiYgdXNlci5pZCA/IChcbiAgICAgICAgICAgICAgPERyb3Bkb3duIG92ZXJsYXk9e3VzZXJEcm9wRG93bn0+XG4gICAgICAgICAgICAgICAgPGEgaHJlZj1cIi9cIj5cbiAgICAgICAgICAgICAgICAgIDxBdmF0YXIgc2l6ZT17NDB9IHNyYz17dXNlci5hdmF0YXJfdXJsfSAvPlxuICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgPC9Ecm9wZG93bj5cbiAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgIDxUb29sdGlwIHRpdGxlPVwi54K55Ye76L+b6KGM55m75b2VXCI+XG4gICAgICAgICAgICAgICAgPGEgXG4gICAgICAgICAgICAgICAgICAvLyBocmVmPXtwdWJsaWNSdW50aW1lQ29uZmlnLk9BVVRIX1VSTH0gXG4gICAgICAgICAgICAgICAgICAvLyBvbkNsaWNrPXtoYW5kbGVHb3RvT0F1dGh9XG4gICAgICAgICAgICAgICAgICBocmVmPXtgL3ByZXBhcmUtYXV0aD91cmw9JHtyb3V0ZXIuYXNQYXRofWB9IFxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIDxBdmF0YXIgc2l6ZT17NDB9IGljb249XCJ1c2VyXCIgLz5cbiAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICAgIClcbiAgICAgICAgICB9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9Db250YWluZXI+XG4gICAgICAgIFxuICAgICAgPC9IZWFkZXI+XG4gICAgICA8Q29udGVudD5cbiAgICAgICAgey8qIDxDb250YWluZXIgcmVuZGVyZXI9ezxDb21wIGNvbG9yPVwicmVkXCIgc3R5bGU9e3tmb250U2l6ZTogNDB9fSAvPn0+ICovfVxuICAgICAgICA8Q29udGFpbmVyPlxuICAgICAgICAgIHtjaGlsZHJlbn1cbiAgICAgICAgPC9Db250YWluZXI+XG4gICAgICA8L0NvbnRlbnQ+XG4gICAgICA8Rm9vdGVyIHN0eWxlPXtmb290ZXJTdHlsZX0gPlxuICAgICAgICBEZXZlbG9wIGJ5IFRob21hcyBAPGEgaHJlZj1cIm1haWx0bzpjc2hhbi5rb25nQGdtYWlsLmNvbVwiPmNzaGFuLmtvbmdAZ21haWwuY29tPC9hPlxuICAgICAgPC9Gb290ZXI+XG4gICAgICA8c3R5bGUganN4PntgXG4gICAgICAgIC5oZWFkZXItaW5uZXJ7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgICAgIH1cbiAgICAgICAgLmhlYWRlci1sZWZ0e1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAganVzdGlmeS1jb250ZW50OiBmbGV4LXN0YXJ0O1xuICAgICAgICB9XG4gICAgICAgIC5jb250ZW50e1xuICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgIH1cbiAgICAgIGB9PC9zdHlsZT5cbiAgICAgIDxzdHlsZSBqc3ggZ2xvYmFsPntgXG4gICAgICAgICNfX25leHR7XG4gICAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICB9XG4gICAgICAgIC5hbnQtbGF5b3V0e1xuICAgICAgICAgIG1pbi1oZWlnaHQ6IDEwMCU7XG4gICAgICAgIH1cbiAgICAgICAgLmFudC1sYXlvdXQtaGVhZGVye1xuICAgICAgICAgIHBhZGRpbmctbGVmdDogMDtcbiAgICAgICAgICBwYWRkaW5nLXJpZ2h0OiAwO1xuICAgICAgICB9XG4gICAgICAgIC5hbnQtbGF5b3V0LWNvbnRlbnR7XG4gICAgICAgICAgYmFja2dyb3VuZDogI2ZmZjtcbiAgICAgICAgfVxuICAgICAgYH08L3N0eWxlPlxuICAgIDwvTGF5b3V0PlxuICApXG59XG5cbmV4cG9ydCBkZWZhdWx0IGNvbm5lY3QoZnVuY3Rpb24gbWFwU3RhdGUgKHN0YXRlKSB7XG4gIHJldHVybiB7XG4gICAgdXNlcjogc3RhdGUudXNlclxuICB9XG59LCBmdW5jdGlvbiBtYXBSZWR1Y2VyKGRpc3BhdGNoKSB7XG4gIHJldHVybiB7XG4gICAgbG9nb3V0OiAoKSA9PiBkaXNwYXRjaChsb2dvdXQoKSlcbiAgfVxufSkod2l0aFJvdXRlcihNeUxheW91dCkpIl19 */\\n/*@ sourceURL=/Users/yangshasha/Downloads/workspace/coding/nodejs/NextJsGithub/nextjs-project/components/Layout.jsx */\"), React.createElement(_JSXStyle, {\n    id: \"2946016146\"\n  }, \"#__next{height:100%;}.ant-layout{min-height:100%;}.ant-layout-header{padding-left:0;padding-right:0;}.ant-layout-content{background:#fff;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy95YW5nc2hhc2hhL0Rvd25sb2Fkcy93b3Jrc3BhY2UvY29kaW5nL25vZGVqcy9OZXh0SnNHaXRodWIvbmV4dGpzLXByb2plY3QvY29tcG9uZW50cy9MYXlvdXQuanN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQXVJeUIsQUFHdUIsQUFHSSxBQUdELEFBSUMsWUFUbEIsR0FNa0IsQ0FIbEIsQUFPQSxlQUhBIiwiZmlsZSI6Ii9Vc2Vycy95YW5nc2hhc2hhL0Rvd25sb2Fkcy93b3Jrc3BhY2UvY29kaW5nL25vZGVqcy9OZXh0SnNHaXRodWIvbmV4dGpzLXByb2plY3QvY29tcG9uZW50cy9MYXlvdXQuanN4Iiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlU3RhdGUsIHVzZUNhbGxiYWNrIH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgTGluayBmcm9tICduZXh0L2xpbmsnXG5pbXBvcnQgZ2V0Q29uZmlnIGZyb20gJ25leHQvY29uZmlnJ1xuaW1wb3J0IHsgY29ubmVjdCB9IGZyb20gJ3JlYWN0LXJlZHV4J1xuaW1wb3J0IHsgd2l0aFJvdXRlciB9IGZyb20gJ25leHQvcm91dGVyJ1xuaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJ1xuaW1wb3J0IENvbnRhaW5lciBmcm9tICcuL0NvbnRhaW5lcidcbmltcG9ydCB7IGxvZ291dCB9IGZyb20gJy4uL3N0b3JlL3N0b3JlJ1xuaW1wb3J0IHsgQnV0dG9uLCBMYXlvdXQsIEljb24sIElucHV0LCBBdmF0YXIsIFRvb2x0aXAsIERyb3Bkb3duLCBNZW51IH0gZnJvbSAnYW50ZCdcblxuY29uc3QgeyBIZWFkZXIsIENvbnRlbnQsIEZvb3RlciB9ID0gTGF5b3V0XG5cbmNvbnN0IHsgcHVibGljUnVudGltZUNvbmZpZyB9ID0gZ2V0Q29uZmlnKClcblxuY29uc3QgZ2l0aHViSWNvblN0eWxlID0ge1xuICBjb2xvcjogJ3doaXRlJyxcbiAgZm9udFNpemU6IDQwLFxuICBkaXNwbGF5OiAnYmxvY2snLFxuICBwYWRkaW5nVG9wOiAxMCxcbiAgbWFyZ2luUmlnaHQ6IDIwXG59XG5cbmNvbnN0IGZvb3RlclN0eWxlID0ge1xuICB0ZXh0QWxpZ246ICdjZW50ZXInXG59XG5cbmNvbnN0IENvbXAgPSAoeyBjb2xvciwgY2hpbGRyZW4sIHN0eWxlIH0pID0+IDxkaXYgc3R5bGU9e3sgY29sb3IsIC4uLnN0eWxlIH19PntjaGlsZHJlbn08L2Rpdj5cblxuY29uc3QgTXlMYXlvdXQgPSAoeyBjaGlsZHJlbiwgdXNlciwgbG9nb3V0LCByb3V0ZXIgfSkgPT4ge1xuXG4gIGNvbnN0IHVybFF1ZXJ5ID0gcm91dGVyLnF1ZXJ5ICYmIHJvdXRlci5xdWVyeS5xdWVyeVxuXG4gIGNvbnN0IFtzZWFyY2gsIHNldFNlYXJjaF0gPSB1c2VTdGF0ZSh1cmxRdWVyeSB8fCAnJylcblxuICBjb25zdCBoYW5kbGVTZWFyY2hDaGFuZ2UgPSB1c2VDYWxsYmFjaygoZXZlbnQpID0+IHtcbiAgICBzZXRTZWFyY2goZXZlbnQudGFyZ2V0LnZhbHVlKVxuICB9LCBbc2V0U2VhcmNoXSlcblxuICBjb25zdCBoYW5kbGVPblNlYXJjaCA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICByb3V0ZXIucHVzaChgL3NlYXJjaD9xdWVyeT0ke3NlYXJjaH1gKVxuICB9LCBbc2VhcmNoXSlcblxuICBjb25zdCBoYW5kbGVMb2dvdXQgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgbG9nb3V0KClcbiAgfSwgW2xvZ291dF0pXG5cbiAgY29uc3QgaGFuZGxlR290b09BdXRoID0gdXNlQ2FsbGJhY2soKGUpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICBheGlvcy5nZXQoYC9wcmVwYXJlLWF1dGg/dXJsPSR7cm91dGVyLmFzUGF0aH1gKVxuICAgIC50aGVuKHJlc3AgPT4ge1xuICAgICAgaWYgKHJlc3Auc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgbG9jYXRpb24uaHJlZiA9IHB1YmxpY1J1bnRpbWVDb25maWcuT0FVVEhfVVJMXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZygncHJlcGFyZSBhdXRoIGZhaWxlZCcsIHJlc3ApXG4gICAgICB9XG4gICAgfSkuY2F0Y2goZXJyID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKCdwcmVwYXJlIGF1dGggZmFpbGVkJywgZXJyKVxuICAgIH0pXG4gIH0sIFtdKVxuXG4gIGNvbnN0IHVzZXJEcm9wRG93biA9IChcbiAgICA8TWVudT5cbiAgICAgIDxNZW51Lkl0ZW0+XG4gICAgICAgIDxhIGhyZWY9XCJqYXZhc2NyaXB0OnZvaWQoMClcIiBvbkNsaWNrPXtoYW5kbGVMb2dvdXR9PueZu+WHujwvYT5cbiAgICAgIDwvTWVudS5JdGVtPlxuICAgIDwvTWVudT5cbiAgKVxuXG4gIHJldHVybiAoXG4gICAgPExheW91dD5cbiAgICAgIDxIZWFkZXI+XG4gICAgICA8Q29udGFpbmVyIHJlbmRlcmVyPXs8ZGl2IGNsYXNzTmFtZT1cImhlYWRlci1pbm5lclwiLz59PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhlYWRlci1sZWZ0XCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJsb2dvXCI+XG4gICAgICAgICAgICA8YSBocmVmPVwiL1wiPlxuICAgICAgICAgICAgICA8SWNvbiB0eXBlPVwiZ2l0aHViXCIgc3R5bGU9e2dpdGh1Ykljb25TdHlsZX0gLz5cbiAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgPElucHV0LlNlYXJjaCBcbiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCLmkJzntKLku5PlupNcIlxuICAgICAgICAgICAgICB2YWx1ZT17c2VhcmNofVxuICAgICAgICAgICAgICBvbkNoYW5nZT17aGFuZGxlU2VhcmNoQ2hhbmdlfVxuICAgICAgICAgICAgICBvblNlYXJjaD17aGFuZGxlT25TZWFyY2h9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJoZWFkZXItcmlnaHRcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInVzZXJcIj5cbiAgICAgICAgICB7XG4gICAgICAgICAgICB1c2VyICYmIHVzZXIuaWQgPyAoXG4gICAgICAgICAgICAgIDxEcm9wZG93biBvdmVybGF5PXt1c2VyRHJvcERvd259PlxuICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIvXCI+XG4gICAgICAgICAgICAgICAgICA8QXZhdGFyIHNpemU9ezQwfSBzcmM9e3VzZXIuYXZhdGFyX3VybH0gLz5cbiAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgIDwvRHJvcGRvd24+XG4gICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICA8VG9vbHRpcCB0aXRsZT1cIueCueWHu+i/m+ihjOeZu+W9lVwiPlxuICAgICAgICAgICAgICAgIDxhIFxuICAgICAgICAgICAgICAgICAgLy8gaHJlZj17cHVibGljUnVudGltZUNvbmZpZy5PQVVUSF9VUkx9IFxuICAgICAgICAgICAgICAgICAgLy8gb25DbGljaz17aGFuZGxlR290b09BdXRofVxuICAgICAgICAgICAgICAgICAgaHJlZj17YC9wcmVwYXJlLWF1dGg/dXJsPSR7cm91dGVyLmFzUGF0aH1gfSBcbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICA8QXZhdGFyIHNpemU9ezQwfSBpY29uPVwidXNlclwiIC8+XG4gICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICA8L1Rvb2x0aXA+XG4gICAgICAgICAgICApXG4gICAgICAgICAgfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvQ29udGFpbmVyPlxuICAgICAgICBcbiAgICAgIDwvSGVhZGVyPlxuICAgICAgPENvbnRlbnQ+XG4gICAgICAgIHsvKiA8Q29udGFpbmVyIHJlbmRlcmVyPXs8Q29tcCBjb2xvcj1cInJlZFwiIHN0eWxlPXt7Zm9udFNpemU6IDQwfX0gLz59PiAqL31cbiAgICAgICAgPENvbnRhaW5lcj5cbiAgICAgICAgICB7Y2hpbGRyZW59XG4gICAgICAgIDwvQ29udGFpbmVyPlxuICAgICAgPC9Db250ZW50PlxuICAgICAgPEZvb3RlciBzdHlsZT17Zm9vdGVyU3R5bGV9ID5cbiAgICAgICAgRGV2ZWxvcCBieSBUaG9tYXMgQDxhIGhyZWY9XCJtYWlsdG86Y3NoYW4ua29uZ0BnbWFpbC5jb21cIj5jc2hhbi5rb25nQGdtYWlsLmNvbTwvYT5cbiAgICAgIDwvRm9vdGVyPlxuICAgICAgPHN0eWxlIGpzeD57YFxuICAgICAgICAuaGVhZGVyLWlubmVye1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgICAgICB9XG4gICAgICAgIC5oZWFkZXItbGVmdHtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGp1c3RpZnktY29udGVudDogZmxleC1zdGFydDtcbiAgICAgICAgfVxuICAgICAgICAuY29udGVudHtcbiAgICAgICAgICBjb2xvcjogcmVkO1xuICAgICAgICB9XG4gICAgICBgfTwvc3R5bGU+XG4gICAgICA8c3R5bGUganN4IGdsb2JhbD57YFxuICAgICAgICAjX19uZXh0e1xuICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgfVxuICAgICAgICAuYW50LWxheW91dHtcbiAgICAgICAgICBtaW4taGVpZ2h0OiAxMDAlO1xuICAgICAgICB9XG4gICAgICAgIC5hbnQtbGF5b3V0LWhlYWRlcntcbiAgICAgICAgICBwYWRkaW5nLWxlZnQ6IDA7XG4gICAgICAgICAgcGFkZGluZy1yaWdodDogMDtcbiAgICAgICAgfVxuICAgICAgICAuYW50LWxheW91dC1jb250ZW50e1xuICAgICAgICAgIGJhY2tncm91bmQ6ICNmZmY7XG4gICAgICAgIH1cbiAgICAgIGB9PC9zdHlsZT5cbiAgICA8L0xheW91dD5cbiAgKVxufVxuXG5leHBvcnQgZGVmYXVsdCBjb25uZWN0KGZ1bmN0aW9uIG1hcFN0YXRlIChzdGF0ZSkge1xuICByZXR1cm4ge1xuICAgIHVzZXI6IHN0YXRlLnVzZXJcbiAgfVxufSwgZnVuY3Rpb24gbWFwUmVkdWNlcihkaXNwYXRjaCkge1xuICByZXR1cm4ge1xuICAgIGxvZ291dDogKCkgPT4gZGlzcGF0Y2gobG9nb3V0KCkpXG4gIH1cbn0pKHdpdGhSb3V0ZXIoTXlMYXlvdXQpKSJdfQ== */\\n/*@ sourceURL=/Users/yangshasha/Downloads/workspace/coding/nodejs/NextJsGithub/nextjs-project/components/Layout.jsx */\"));\n};\n\nexport default connect(function mapState(state) {\n  return {\n    user: state.user\n  };\n}, function mapReducer(dispatch) {\n  return {\n    logout: () => dispatch(logout())\n  };\n})(withRouter(MyLayout));","map":{"version":3,"sources":["/Users/yangshasha/Downloads/workspace/coding/nodejs/NextJsGithub/nextjs-project/components/Layout.jsx"],"names":["useState","useCallback","Link","getConfig","connect","withRouter","axios","Container","logout","Header","Content","Footer","publicRuntimeConfig","githubIconStyle","color","fontSize","display","paddingTop","marginRight","footerStyle","textAlign","Comp","children","style","MyLayout","user","router","urlQuery","query","search","setSearch","handleSearchChange","event","target","value","handleOnSearch","push","handleLogout","handleGotoOAuth","e","preventDefault","get","asPath","then","resp","status","location","href","OAUTH_URL","console","log","catch","err","userDropDown","id","avatar_url","mapState","state","mapReducer","dispatch"],"mappings":"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","sourcesContent":["import { useState, useCallback } from 'react'\nimport Link from 'next/link'\nimport getConfig from 'next/config'\nimport { connect } from 'react-redux'\nimport { withRouter } from 'next/router'\nimport axios from 'axios'\nimport Container from './Container'\nimport { logout } from '../store/store'\nimport { Button, Layout, Icon, Input, Avatar, Tooltip, Dropdown, Menu } from 'antd'\n\nconst { Header, Content, Footer } = Layout\n\nconst { publicRuntimeConfig } = getConfig()\n\nconst githubIconStyle = {\n  color: 'white',\n  fontSize: 40,\n  display: 'block',\n  paddingTop: 10,\n  marginRight: 20\n}\n\nconst footerStyle = {\n  textAlign: 'center'\n}\n\nconst Comp = ({ color, children, style }) => <div style={{ color, ...style }}>{children}</div>\n\nconst MyLayout = ({ children, user, logout, router }) => {\n\n  const urlQuery = router.query && router.query.query\n\n  const [search, setSearch] = useState(urlQuery || '')\n\n  const handleSearchChange = useCallback((event) => {\n    setSearch(event.target.value)\n  }, [setSearch])\n\n  const handleOnSearch = useCallback(() => {\n    router.push(`/search?query=${search}`)\n  }, [search])\n\n  const handleLogout = useCallback(() => {\n    logout()\n  }, [logout])\n\n  const handleGotoOAuth = useCallback((e) => {\n    e.preventDefault()\n    axios.get(`/prepare-auth?url=${router.asPath}`)\n    .then(resp => {\n      if (resp.status === 200) {\n        location.href = publicRuntimeConfig.OAUTH_URL\n      } else {\n        console.log('prepare auth failed', resp)\n      }\n    }).catch(err => {\n      console.log('prepare auth failed', err)\n    })\n  }, [])\n\n  const userDropDown = (\n    <Menu>\n      <Menu.Item>\n        <a href=\"javascript:void(0)\" onClick={handleLogout}>登出</a>\n      </Menu.Item>\n    </Menu>\n  )\n\n  return (\n    <Layout>\n      <Header>\n      <Container renderer={<div className=\"header-inner\"/>}>\n        <div className=\"header-left\">\n          <div className=\"logo\">\n            <a href=\"/\">\n              <Icon type=\"github\" style={githubIconStyle} />\n            </a>\n          </div>\n          <div>\n            <Input.Search \n              placeholder=\"搜索仓库\"\n              value={search}\n              onChange={handleSearchChange}\n              onSearch={handleOnSearch}\n            />\n          </div>\n        </div>\n        <div className=\"header-right\">\n          <div className=\"user\">\n          {\n            user && user.id ? (\n              <Dropdown overlay={userDropDown}>\n                <a href=\"/\">\n                  <Avatar size={40} src={user.avatar_url} />\n                </a>\n              </Dropdown>\n            ) : (\n              <Tooltip title=\"点击进行登录\">\n                <a \n                  // href={publicRuntimeConfig.OAUTH_URL} \n                  // onClick={handleGotoOAuth}\n                  href={`/prepare-auth?url=${router.asPath}`} \n                >\n                  <Avatar size={40} icon=\"user\" />\n                </a>\n              </Tooltip>\n            )\n          }\n          </div>\n        </div>\n      </Container>\n        \n      </Header>\n      <Content>\n        {/* <Container renderer={<Comp color=\"red\" style={{fontSize: 40}} />}> */}\n        <Container>\n          {children}\n        </Container>\n      </Content>\n      <Footer style={footerStyle} >\n        Develop by Thomas @<a href=\"mailto:cshan.kong@gmail.com\">cshan.kong@gmail.com</a>\n      </Footer>\n      <style jsx>{`\n        .header-inner{\n          display: flex;\n          justify-content: space-between;\n        }\n        .header-left{\n          display: flex;\n          justify-content: flex-start;\n        }\n        .content{\n          color: red;\n        }\n      `}</style>\n      <style jsx global>{`\n        #__next{\n          height: 100%;\n        }\n        .ant-layout{\n          min-height: 100%;\n        }\n        .ant-layout-header{\n          padding-left: 0;\n          padding-right: 0;\n        }\n        .ant-layout-content{\n          background: #fff;\n        }\n      `}</style>\n    </Layout>\n  )\n}\n\nexport default connect(function mapState (state) {\n  return {\n    user: state.user\n  }\n}, function mapReducer(dispatch) {\n  return {\n    logout: () => dispatch(logout())\n  }\n})(withRouter(MyLayout))"]},"metadata":{},"sourceType":"module"}