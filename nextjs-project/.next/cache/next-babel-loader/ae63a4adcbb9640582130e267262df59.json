{"ast":null,"code":"import _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport _objectWithoutProperties from \"@babel/runtime-corejs2/helpers/esm/objectWithoutProperties\";\nimport _Object$entries from \"@babel/runtime-corejs2/core-js/object/entries\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nimport { useEffect } from 'react';\nimport Link from 'next/link';\nimport { withRouter } from 'next/router';\nimport Repo from './Repo';\nimport api from '../lib/api';\nimport { get, cache } from '../lib/repo-basic-cache';\nconst isServer = typeof window === 'undefined';\nexport default ((Comp, type = 'index') => {\n  const makeQuery = queryObject => {\n    const query = _Object$entries(queryObject).reduce((result, entry) => {\n      result.push(entry.join('='));\n      return result;\n    }, []).join('&');\n\n    return `?${query}`;\n  };\n\n  const WithDetail = (_ref) => {\n    let {\n      router,\n      repoBasic\n    } = _ref,\n        rest = _objectWithoutProperties(_ref, [\"router\", \"repoBasic\"]);\n\n    const query = makeQuery(router.query);\n    useEffect(() => {\n      if (!isServer) {\n        cache(repoBasic);\n      }\n    });\n    return React.createElement(\"div\", {\n      className: \"jsx-1251108973\" + \" \" + \"root\"\n    }, React.createElement(\"div\", {\n      className: \"jsx-1251108973\" + \" \" + \"repo-basic\"\n    }, React.createElement(Repo, {\n      repo: repoBasic\n    }), React.createElement(\"div\", {\n      className: \"jsx-1251108973\" + \" \" + \"tabs\"\n    }, type === 'index' ? React.createElement(\"span\", {\n      className: \"jsx-1251108973\" + \" \" + \"tab\"\n    }, \"Readme\") : React.createElement(Link, {\n      href: `/detail${query}`\n    }, React.createElement(\"a\", {\n      className: \"jsx-1251108973\" + \" \" + \"tab index\"\n    }, \"Readme\")), type === 'issues' ? React.createElement(\"span\", {\n      className: \"jsx-1251108973\" + \" \" + \"tab\"\n    }, \"Issues\") : React.createElement(Link, {\n      href: `/detail/issues${query}`\n    }, React.createElement(\"a\", {\n      className: \"jsx-1251108973\" + \" \" + \"tab issues\"\n    }, \"Issues\")))), React.createElement(\"div\", {\n      className: \"jsx-1251108973\"\n    }, React.createElement(Comp, rest)), React.createElement(_JSXStyle, {\n      id: \"1251108973\"\n    }, \".root.jsx-1251108973{padding-top:20px;}.repo-basic.jsx-1251108973{padding:20px;border:1px solid #eee;margin-bottom:20px;border-radius:5px;}.tab.jsx-1251108973+.tab.jsx-1251108973{margin-left:20px;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy95YW5nc2hhc2hhL0Rvd25sb2Fkcy93b3Jrc3BhY2UvY29kaW5nL25vZGVqcy9OZXh0SnNHaXRodWIvbmV4dGpzLXByb2plY3QvY29tcG9uZW50cy93aXRoLXJlcG8tYmFzaWMuanN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQXFEb0IsQUFHOEIsQUFHSixBQU1JLGFBTEssSUFIeEIsQUFTQSxrQkFMcUIsbUJBQ0Qsa0JBQ3BCIiwiZmlsZSI6Ii9Vc2Vycy95YW5nc2hhc2hhL0Rvd25sb2Fkcy93b3Jrc3BhY2UvY29kaW5nL25vZGVqcy9OZXh0SnNHaXRodWIvbmV4dGpzLXByb2plY3QvY29tcG9uZW50cy93aXRoLXJlcG8tYmFzaWMuanN4Iiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgTGluayBmcm9tICduZXh0L2xpbmsnXG5pbXBvcnQgeyB3aXRoUm91dGVyIH0gZnJvbSAnbmV4dC9yb3V0ZXInXG5pbXBvcnQgUmVwbyBmcm9tICcuL1JlcG8nXG5pbXBvcnQgYXBpIGZyb20gJy4uL2xpYi9hcGknXG5pbXBvcnQgeyBnZXQsIGNhY2hlIH0gZnJvbSAnLi4vbGliL3JlcG8tYmFzaWMtY2FjaGUnXG5cbmNvbnN0IGlzU2VydmVyID0gdHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCdcblxuZXhwb3J0IGRlZmF1bHQgKENvbXAsIHR5cGUgPSAnaW5kZXgnKSA9PiB7XG5cbiAgY29uc3QgbWFrZVF1ZXJ5ID0gKHF1ZXJ5T2JqZWN0KSA9PiB7XG4gICAgY29uc3QgcXVlcnkgPSBPYmplY3QuZW50cmllcyhxdWVyeU9iamVjdClcbiAgICAucmVkdWNlKChyZXN1bHQsIGVudHJ5KSA9PiB7XG4gICAgICByZXN1bHQucHVzaChlbnRyeS5qb2luKCc9JykpXG4gICAgICByZXR1cm4gcmVzdWx0XG4gICAgfSwgW10pLmpvaW4oJyYnKVxuICAgIHJldHVybiBgPyR7cXVlcnl9YFxuICB9XG5cbiAgY29uc3QgV2l0aERldGFpbCA9ICh7IHJvdXRlciwgcmVwb0Jhc2ljLCAuLi5yZXN0IH0pID0+IHtcbiAgICBjb25zdCBxdWVyeSA9IG1ha2VRdWVyeShyb3V0ZXIucXVlcnkpXG4gIFxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICBpZiAoIWlzU2VydmVyKSB7XG4gICAgICAgIGNhY2hlKHJlcG9CYXNpYylcbiAgICAgIH1cbiAgICB9KVxuICAgIFxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvb3RcIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyZXBvLWJhc2ljXCI+XG4gICAgICAgICAgPFJlcG8gcmVwbz17cmVwb0Jhc2ljfSAvPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGFic1wiPlxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICB0eXBlID09PSAnaW5kZXgnID8gXG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRhYlwiPlJlYWRtZTwvc3Bhbj4gOlxuICAgICAgICAgICAgICA8TGluayBocmVmPXtgL2RldGFpbCR7cXVlcnl9YH0+XG4gICAgICAgICAgICAgICAgPGEgY2xhc3NOYW1lPVwidGFiIGluZGV4XCI+UmVhZG1lPC9hPlxuICAgICAgICAgICAgICA8L0xpbms+XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHR5cGUgPT09ICdpc3N1ZXMnID8gXG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRhYlwiPklzc3Vlczwvc3Bhbj4gOlxuICAgICAgICAgICAgICA8TGluayBocmVmPXtgL2RldGFpbC9pc3N1ZXMke3F1ZXJ5fWB9PlxuICAgICAgICAgICAgICAgIDxhIGNsYXNzTmFtZT1cInRhYiBpc3N1ZXNcIj5Jc3N1ZXM8L2E+XG4gICAgICAgICAgICAgIDwvTGluaz5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgPENvbXAgey4uLnJlc3R9IC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8c3R5bGUganN4PntgXG4gICAgICAgICAgLnJvb3Qge1xuICAgICAgICAgICAgcGFkZGluZy10b3A6IDIwcHg7XG4gICAgICAgICAgfSAgXG4gICAgICAgICAgLnJlcG8tYmFzaWMge1xuICAgICAgICAgICAgcGFkZGluZzogMjBweDtcbiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNlZWU7XG4gICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAyMHB4O1xuICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNXB4O1xuICAgICAgICAgIH1cbiAgICAgICAgICAudGFiICsgLnRhYiB7XG4gICAgICAgICAgICBtYXJnaW4tbGVmdDogMjBweDtcbiAgICAgICAgICB9XG4gICAgICAgIGB9PC9zdHlsZT5cbiAgICAgIDwvZGl2PlxuICAgIClcbiAgfVxuICBXaXRoRGV0YWlsLmdldEluaXRpYWxQcm9wcyA9IGFzeW5jIChjb250ZXh0KSA9PiB7XG5cbiAgICBjb25zdCB7IHJvdXRlciwgY3R4IH0gPSBjb250ZXh0IFxuICAgIGNvbnN0IHsgb3duZXIsIG5hbWUgfSA9IGN0eC5xdWVyeVxuXG4gICAgY29uc3QgZnVsbF9uYW1lID0gYCR7b3duZXJ9LyR7bmFtZX1gXG4gIFxuICAgIGxldCBwYWdlRGF0YSA9IHt9XG4gICAgaWYgKENvbXAuZ2V0SW5pdGlhbFByb3BzKSB7XG4gICAgICBwYWdlRGF0YSA9IGF3YWl0IENvbXAuZ2V0SW5pdGlhbFByb3BzKGNvbnRleHQpXG4gICAgfVxuXG4gICAgaWYgKGdldChmdWxsX25hbWUpKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICByZXBvQmFzaWM6IGdldChmdWxsX25hbWUpLFxuICAgICAgICAuLi5wYWdlRGF0YVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHJlcG9CYXNpYyA9IGF3YWl0IGFwaS5yZXF1ZXN0KFxuICAgICAge1xuICAgICAgICB1cmw6IGAvcmVwb3MvJHtvd25lcn0vJHtuYW1lfWAsXG4gICAgICB9LFxuICAgICAgY3R4LnJlcSxcbiAgICAgIGN0eC5yZXNcbiAgICApXG5cbiAgICBcblxuICAgIHJldHVybiB7XG4gICAgICByZXBvQmFzaWM6IHJlcG9CYXNpYy5kYXRhLFxuICAgICAgLi4ucGFnZURhdGFcbiAgICB9XG4gIH1cblxuICByZXR1cm4gd2l0aFJvdXRlcihXaXRoRGV0YWlsKVxufSJdfQ== */\\n/*@ sourceURL=/Users/yangshasha/Downloads/workspace/coding/nodejs/NextJsGithub/nextjs-project/components/with-repo-basic.jsx */\"));\n  };\n\n  WithDetail.getInitialProps = async context => {\n    const {\n      router,\n      ctx\n    } = context;\n    const {\n      owner,\n      name\n    } = ctx.query;\n    const full_name = `${owner}/${name}`;\n    let pageData = {};\n\n    if (Comp.getInitialProps) {\n      pageData = await Comp.getInitialProps(context);\n    }\n\n    if (get(full_name)) {\n      return _objectSpread({\n        repoBasic: get(full_name)\n      }, pageData);\n    }\n\n    const repoBasic = await api.request({\n      url: `/repos/${owner}/${name}`\n    }, ctx.req, ctx.res);\n    return _objectSpread({\n      repoBasic: repoBasic.data\n    }, pageData);\n  };\n\n  return withRouter(WithDetail);\n});","map":{"version":3,"sources":["/Users/yangshasha/Downloads/workspace/coding/nodejs/NextJsGithub/nextjs-project/components/with-repo-basic.jsx"],"names":["useEffect","Link","withRouter","Repo","api","get","cache","isServer","window","Comp","type","makeQuery","queryObject","query","reduce","result","entry","push","join","WithDetail","router","repoBasic","rest","getInitialProps","context","ctx","owner","name","full_name","pageData","request","url","req","res","data"],"mappings":"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","sourcesContent":["import { useEffect } from 'react'\nimport Link from 'next/link'\nimport { withRouter } from 'next/router'\nimport Repo from './Repo'\nimport api from '../lib/api'\nimport { get, cache } from '../lib/repo-basic-cache'\n\nconst isServer = typeof window === 'undefined'\n\nexport default (Comp, type = 'index') => {\n\n  const makeQuery = (queryObject) => {\n    const query = Object.entries(queryObject)\n    .reduce((result, entry) => {\n      result.push(entry.join('='))\n      return result\n    }, []).join('&')\n    return `?${query}`\n  }\n\n  const WithDetail = ({ router, repoBasic, ...rest }) => {\n    const query = makeQuery(router.query)\n  \n    useEffect(() => {\n      if (!isServer) {\n        cache(repoBasic)\n      }\n    })\n    \n    return (\n      <div className=\"root\">\n        <div className=\"repo-basic\">\n          <Repo repo={repoBasic} />\n          <div className=\"tabs\">\n            {\n              type === 'index' ? \n              <span className=\"tab\">Readme</span> :\n              <Link href={`/detail${query}`}>\n                <a className=\"tab index\">Readme</a>\n              </Link>\n            }\n            {\n              type === 'issues' ? \n              <span className=\"tab\">Issues</span> :\n              <Link href={`/detail/issues${query}`}>\n                <a className=\"tab issues\">Issues</a>\n              </Link>\n            }\n          </div>\n        </div>\n        <div>\n          <Comp {...rest} />\n        </div>\n        <style jsx>{`\n          .root {\n            padding-top: 20px;\n          }  \n          .repo-basic {\n            padding: 20px;\n            border: 1px solid #eee;\n            margin-bottom: 20px;\n            border-radius: 5px;\n          }\n          .tab + .tab {\n            margin-left: 20px;\n          }\n        `}</style>\n      </div>\n    )\n  }\n  WithDetail.getInitialProps = async (context) => {\n\n    const { router, ctx } = context \n    const { owner, name } = ctx.query\n\n    const full_name = `${owner}/${name}`\n  \n    let pageData = {}\n    if (Comp.getInitialProps) {\n      pageData = await Comp.getInitialProps(context)\n    }\n\n    if (get(full_name)) {\n      return {\n        repoBasic: get(full_name),\n        ...pageData\n      }\n    }\n\n    const repoBasic = await api.request(\n      {\n        url: `/repos/${owner}/${name}`,\n      },\n      ctx.req,\n      ctx.res\n    )\n\n    \n\n    return {\n      repoBasic: repoBasic.data,\n      ...pageData\n    }\n  }\n\n  return withRouter(WithDetail)\n}"]},"metadata":{},"sourceType":"module"}